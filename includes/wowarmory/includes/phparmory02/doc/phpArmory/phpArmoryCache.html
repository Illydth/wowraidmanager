<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
	<title>Docs For Class phpArmoryCache</title>
	<link rel="stylesheet" type="text/css" id="layout" href="../media/layout.css" media="screen">
	<link rel="stylesheet" type="text/css" href="../media/style.css" media="all">
	<link rel="stylesheet" type="text/css" href="../media/print.css" media="print">
</head>

<body>
<div id="header">
	<div id="navLinks">
        
                                    
                            	        [ <a href="../classtrees_phpArmory.html">Class Tree: phpArmory</a> ]
            [ <a href="../elementindex_phpArmory.html">Index: phpArmory</a> ]
        		[ <a href="../elementindex.html">All elements</a> ]		
	</div>
	<div id="packagePosition">
		<div id="packageTitle2">phpArmory</div>
		<div id="packageTitle">phpArmory</div>
		<div id="elementPath"> &middot; </div>
	</div>
</div>

<div id="nav" class="small">
	<div id="todolist">
			<p><a href="../todolist.html">Todo List</a></p>
	</div>
	<div id="packages">
		Packages:
					<p><a href="../li_phpArmory.html">phpArmory</a></p>
			</div>

				<div id="index">
			<div id="files">
								Files:<br>
								<a href="../phpArmory/_phpArmory.class.php.html">		phpArmory.class.php
		</a><br>
			<a href="../phpArmory/_phpArmoryCache.class.php.html">		phpArmoryCache.class.php
		</a><br>
				</div>
			<div id="interfaces">
							</div>
			<div id="classes">
				Classes:<br>
								<a href="../phpArmory/phpArmory.html">		phpArmory
		</a><br>
			<a href="../phpArmory/phpArmoryCache.html">		phpArmoryCache
		</a><br>
				</div>
		</div>
	</div>

<div id="body">
	    		<h1>Class: phpArmoryCache</h1>
	<p style="margin: 0px;">Source Location: /phpArmoryCache.class.php</p>
	

<div class="leftcol">
	<h3><a href="#class_details">Class Overview</a> <span class="smalllinenumber">[line 38]</span></h3>
	<div id="classTree"><pre><a href="../phpArmory/phpArmory.html">phpArmory</a>
   |
   --phpArmoryCache</pre>
</div>
	<div class="small">
	<p>phpArmory Class</p>
		<h4>Author(s):</h4>
	<ul>
			</ul>
	<h4>Version:</h4>
	<ul>
			</ul>

	<h4>Copyright:</h4>
	<ul>
			</li>
	</div>
</div>

<div class="middlecol">
	<h3><a href="#class_vars">Variables</a></h3>
	<ul class="small">
				<li><a href="../phpArmory/phpArmoryCache.html#var$cacheID">$cacheID</a></li>
				<li><a href="../phpArmory/phpArmoryCache.html#var$dataConn">$dataConn</a></li>
				<li><a href="../phpArmory/phpArmoryCache.html#var$dataPath">$dataPath</a></li>
				<li><a href="../phpArmory/phpArmoryCache.html#var$dataStore">$dataStore</a></li>
				<li><a href="../phpArmory/phpArmoryCache.html#var$dataTable">$dataTable</a></li>
				<li><a href="../phpArmory/phpArmoryCache.html#var$updateInterval">$updateInterval</a></li>
			</ul>
	<h3><a href="#class_consts">Constants</a></h3>
	<ul class="small">
			</ul>
</div>
<div class="rightcol">
	<h3><a href="#class_methods">Methods</a></h3>
	<ul class="small">
				<li><a href="../phpArmory/phpArmoryCache.html#methodphpArmoryCache">phpArmoryCache</a></li>
				<li><a href="../phpArmory/phpArmoryCache.html#methodcacheFetch">cacheFetch</a></li>
				<li><a href="../phpArmory/phpArmoryCache.html#methodcacheSave">cacheSave</a></li>
				<li><a href="../phpArmory/phpArmoryCache.html#methodcharacterFetch">characterFetch</a></li>
				<li><a href="../phpArmory/phpArmoryCache.html#methodguildFetch">guildFetch</a></li>
				<li><a href="../phpArmory/phpArmoryCache.html#methoditemFetch">itemFetch</a></li>
				<li><a href="../phpArmory/phpArmoryCache.html#methoditemNameFetch">itemNameFetch</a></li>
				<li><a href="../phpArmory/phpArmoryCache.html#methodxmlFetch">xmlFetch</a></li>
			</ul>
</div>

<div id="content">
<hr>
	<div class="contents">
	</div>

	<div class="leftCol">
    	<h2>Inherited Variables</h2>
			<div class="indent">
		<h3>Class: <a href="../phpArmory/phpArmory.html">phpArmory</a></h3>
		<div class="small">
			<dl>
						<dt>
				<a href="../phpArmory/phpArmory.html#var$armory">phpArmory::$armory</a>
			</dt>
			<dd>
				 
			</dd>
						<dt>
				<a href="../phpArmory/phpArmory.html#var$character">phpArmory::$character</a>
			</dt>
			<dd>
				 
			</dd>
						<dt>
				<a href="../phpArmory/phpArmory.html#var$guild">phpArmory::$guild</a>
			</dt>
			<dd>
				 
			</dd>
						<dt>
				<a href="../phpArmory/phpArmory.html#var$realm">phpArmory::$realm</a>
			</dt>
			<dd>
				 
			</dd>
						<dt>
				<a href="../phpArmory/phpArmory.html#var$timeout">phpArmory::$timeout</a>
			</dt>
			<dd>
				 
			</dd>
						<dt>
				<a href="../phpArmory/phpArmory.html#var$userAgent">phpArmory::$userAgent</a>
			</dt>
			<dd>
				 
			</dd>
						</dl>
		</div>
		</div>
		<h2>Inherited Constants</h2>
		</div>

	<div class="rightCol">
	<h2>Inherited Methods</h2>
			<div class="indent">
		<h3>Class: <a href="../phpArmory/phpArmory.html">phpArmory</a></h3>
		<dl class="small">
						<dt>
				<a href="../phpArmory/phpArmory.html#methodarmory">phpArmory::armory()</a>
			</dt>
			<dd>
				The Constructor
			</dd>
					<dt>
				<a href="../phpArmory/phpArmory.html#methodcharacterFetch">phpArmory::characterFetch()</a>
			</dt>
			<dd>
				characterFetch
			</dd>
					<dt>
				<a href="../phpArmory/phpArmory.html#methodcharacterIconURL">phpArmory::characterIconURL()</a>
			</dt>
			<dd>
				characterIconURL
			</dd>
					<dt>
				<a href="../phpArmory/phpArmory.html#methodguildFetch">phpArmory::guildFetch()</a>
			</dt>
			<dd>
				guildFetch
			</dd>
					<dt>
				<a href="../phpArmory/phpArmory.html#methoditemFetch">phpArmory::itemFetch()</a>
			</dt>
			<dd>
				itemFetch
			</dd>
					<dt>
				<a href="../phpArmory/phpArmory.html#methoditemNameFetch">phpArmory::itemNameFetch()</a>
			</dt>
			<dd>
				itemNameFetch
			</dd>
					<dt>
				<a href="../phpArmory/phpArmory.html#methodxmlFetch">phpArmory::xmlFetch()</a>
			</dt>
			<dd>
				xmlFetch
			</dd>
					<dt>
				<a href="../phpArmory/phpArmory.html#methodxmlToArray">phpArmory::xmlToArray()</a>
			</dt>
			<dd>
				xmlToArray
			</dd>
					<dt>
				<a href="../phpArmory/phpArmory.html#methodxmlToArrayClose">phpArmory::xmlToArrayClose()</a>
			</dt>
			<dd>
				xmlToArrayClose
			</dd>
					<dt>
				<a href="../phpArmory/phpArmory.html#methodxmlToArrayOpen">phpArmory::xmlToArrayOpen()</a>
			</dt>
			<dd>
				xmlToArrayOpen
			</dd>
				</dl>
		</div>
		</div>
	<br clear="all">
	<hr>

	<a name="class_details"></a>
	<h2>Class Details</h2>
	<p align="center"><strong>phpArmory Class
</strong></p>
<p>A class library to fetch and unserialize XML data from the World of Warcraft Armory website.</p>	<p class="small" style="color: #334B66;">[ <a href="#top">Top</a> ]</p>

	<hr>
	<a name="class_vars"></a>
	<h2>Class Variables</h2>
		<a name="var$cacheID"></a>
	<p></p>
	<h4>$cacheID</h4>
	<div class="indent">
		<p class="linenumber">[line 83]</p>
		<p align="center"><strong>Internal cache id of the current item
</strong></p>
		<p><b>Type:</b> integer</p>
		<p><b>Overrides:</b> </p>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="var$dataConn"></a>
	<p></p>
	<h4>$dataConn = <span class="value">&nbsp;&quot;mysql://user:password@localhost/test&quot;</span></h4>
	<div class="indent">
		<p class="linenumber">[line 60]</p>
		<p align="center"><strong>The mysql connection string
</strong></p>
		<p><b>Type:</b> string</p>
		<p><b>Overrides:</b> </p>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="var$dataPath"></a>
	<p></p>
	<h4>$dataPath = <span class="value">&nbsp;&quot;../cache&quot;</span></h4>
	<div class="indent">
		<p class="linenumber">[line 52]</p>
		<p align="center"><strong>The path to the cache directory (must chmod 777)
</strong></p>
		<p><b>Type:</b> string</p>
		<p><b>Overrides:</b> </p>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="var$dataStore"></a>
	<p></p>
	<h4>$dataStore = <span class="value">&nbsp;&quot;mysql&quot;</span></h4>
	<div class="indent">
		<p class="linenumber">[line 45]</p>
		<p align="center"><strong>Data storage format (&quot;flat&quot; or &quot;mysql&quot;)
</strong></p>
		<p><b>Type:</b> string</p>
		<p><b>Overrides:</b> </p>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="var$dataTable"></a>
	<p></p>
	<h4>$dataTable = <span class="value">&nbsp;&quot;armory_cache&quot;</span></h4>
	<div class="indent">
		<p class="linenumber">[line 67]</p>
		<p align="center"><strong>The mysql cache table
</strong></p>
		<p><b>Type:</b> string</p>
		<p><b>Overrides:</b> </p>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="var$updateInterval"></a>
	<p></p>
	<h4>$updateInterval = <span class="value">&nbsp;300</span></h4>
	<div class="indent">
		<p class="linenumber">[line 76]</p>
		<p align="center"><strong>The time between cache updates in seconds
</strong></p>
<h4>Tags:</h4>
<ul>
	<li><b>todo</b> - Make the interval able to be set for each thing (ie. update items once a week, update guilds once a day, etc..)</li>
</ul>
		<p><b>Type:</b> integer</p>
		<p><b>Overrides:</b> </p>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>

	<hr>
	<a name="class_methods"></a>
	<h2>Class Methods</h2>
	
	<a name="methodphpArmoryCache"></a>
	<p></p>
	<h3>phpArmoryCache</h3>
	<div class="indent">
		<p>
		<code>phpArmoryCache phpArmoryCache(
[string
$armory = NULL], [string
$dataStore = NULL], [integer
$updateInterval = NULL])</code>
		</p>
	
		<p class="linenumber">[line 100]</p>
		<p align="center"><strong>The Constructor
</strong></p>
<p>This function is called when the object is created. It has  three optional parameters. The first sets the base url of  the Armory website that will be used to fetch the serialized  XML data. The second sets whether data will be stored in  flat files or a mysql database. The third indicates how  long a cached XML query should be kept before updating.</p>		
	
	<h4>Parameters:</h4>
	<ul>
			<li>
		<span class="type">string</span>
		<b>$armory</b> 
		- 
		URL of the Armory website</li>
			<li>
		<span class="type">string</span>
		<b>$dataStore</b> 
		- 
		&quot;flat&quot; or &quot;mysql&quot;</li>
			<li>
		<span class="type">integer</span>
		<b>$updateInterval</b> 
		- 
		Time (in seconds) between cache updates</li>
		</ul>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="methodcacheFetch"></a>
	<p></p>
	<h3>cacheFetch</h3>
	<div class="indent">
		<p>
		<code>string[] cacheFetch(
string
$cacheID)</code>
		</p>
	
		<p class="linenumber">[line 261]</p>
		<p align="center"><strong>cacheFetch
</strong></p>
<p>This function returns the unserialized XML data  for the requested cache id from the cache. It  will also remove old cached files/rows that have  not been updated since the update interval.</p><h4>Tags:</h4>
<ul>
	<li><b>return</b> - An associative array</li>
	<li><b>author</b> - Claire Matthews &lt;<a href="mailto:poeticdragon@stormblaze.net">poeticdragon@stormblaze.net</a>&gt;</li>
</ul>
		
	
	<h4>Parameters:</h4>
	<ul>
			<li>
		<span class="type">string</span>
		<b>$cacheID</b> 
		- 
		The ID of the cached thing</li>
		</ul>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="methodcacheSave"></a>
	<p></p>
	<h3>cacheSave</h3>
	<div class="indent">
		<p>
		<code>void cacheSave(
string
$cacheID, string
$xml)</code>
		</p>
	
		<p class="linenumber">[line 306]</p>
		<p align="center"><strong>cacheSave
</strong></p>
<p>This function saves the given XML data to the  cache by its cache id.</p><h4>Tags:</h4>
<ul>
	<li><b>author</b> - Claire Matthews &lt;<a href="mailto:poeticdragon@stormblaze.net">poeticdragon@stormblaze.net</a>&gt;</li>
</ul>
		
	
	<h4>Parameters:</h4>
	<ul>
			<li>
		<span class="type">string</span>
		<b>$cacheID</b> 
		- 
		The ID of the cached thing</li>
			<li>
		<span class="type">string</span>
		<b>$xml</b> 
		- 
		The XML info to be saved</li>
		</ul>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="methodcharacterFetch"></a>
	<p></p>
	<h3>characterFetch</h3>
	<div class="indent">
		<p>
		<code>string[] characterFetch(
[string
$character = NULL], [string
$realm = NULL])</code>
		</p>
	
		<p class="linenumber">[line 150]</p>
		<p align="center"><strong>characterFetch
</strong></p>
<p>Attempts to fetch a cached version of the requested  character. Otherwise, it calls the parent function.</p><h4>Tags:</h4>
<ul>
	<li><b>return</b> - An associative array</li>
	<li><b>author</b> - Claire Matthews &lt;<a href="mailto:poeticdragon@stormblaze.net">poeticdragon@stormblaze.net</a>&gt;</li>
</ul>
		
<p>Overrides <a href="../phpArmory/phpArmory.html#methodcharacterFetch">phpArmory::characterFetch()</a> (characterFetch)</p>	
	<h4>Parameters:</h4>
	<ul>
			<li>
		<span class="type">string</span>
		<b>$character</b> 
		- 
		The name of the character</li>
			<li>
		<span class="type">string</span>
		<b>$realm</b> 
		- 
		The character's realm</li>
		</ul>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="methodguildFetch"></a>
	<p></p>
	<h3>guildFetch</h3>
	<div class="indent">
		<p>
		<code>string[] guildFetch(
[string
$guild = NULL], [string
$realm = NULL])</code>
		</p>
	
		<p class="linenumber">[line 172]</p>
		<p align="center"><strong>guildFetch
</strong></p>
<p>Attempts to fetch a cached version of the requested  guild. Otherwise, it calls the parent function.</p><h4>Tags:</h4>
<ul>
	<li><b>return</b> - An associative array</li>
	<li><b>author</b> - Claire Matthews &lt;<a href="mailto:poeticdragon@stormblaze.net">poeticdragon@stormblaze.net</a>&gt;</li>
</ul>
		
<p>Overrides <a href="../phpArmory/phpArmory.html#methodguildFetch">phpArmory::guildFetch()</a> (guildFetch)</p>	
	<h4>Parameters:</h4>
	<ul>
			<li>
		<span class="type">string</span>
		<b>$guild</b> 
		- 
		The name of the guild</li>
			<li>
		<span class="type">string</span>
		<b>$realm</b> 
		- 
		The guild's realm</li>
		</ul>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="methoditemFetch"></a>
	<p></p>
	<h3>itemFetch</h3>
	<div class="indent">
		<p>
		<code>string[] itemFetch(
integer
$itemID)</code>
		</p>
	
		<p class="linenumber">[line 193]</p>
		<p align="center"><strong>itemFetch
</strong></p>
<p>Attempts to fetch a cached version of the requested  item. Otherwise, it calls the parent function.</p><h4>Tags:</h4>
<ul>
	<li><b>return</b> - An associative array</li>
	<li><b>author</b> - Claire Matthews &lt;<a href="mailto:poeticdragon@stormblaze.net">poeticdragon@stormblaze.net</a>&gt;</li>
</ul>
		
<p>Overrides <a href="../phpArmory/phpArmory.html#methoditemFetch">phpArmory::itemFetch()</a> (itemFetch)</p>	
	<h4>Parameters:</h4>
	<ul>
			<li>
		<span class="type">integer</span>
		<b>$itemID</b> 
		- 
		The ID of the item</li>
		</ul>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="methoditemNameFetch"></a>
	<p></p>
	<h3>itemNameFetch</h3>
	<div class="indent">
		<p>
		<code>string[] itemNameFetch(
string
$item, [string[]
$filter = NULL])</code>
		</p>
	
		<p class="linenumber">[line 212]</p>
		<p align="center"><strong>itemNameFetch
</strong></p>
<p>Attempts to fetch a cached version of the requested  item search. Otherwise, it calls the parent function.</p><h4>Tags:</h4>
<ul>
	<li><b>return</b> - An associative array</li>
	<li><b>author</b> - Claire Matthews &lt;<a href="mailto:poeticdragon@stormblaze.net">poeticdragon@stormblaze.net</a>&gt;</li>
</ul>
		
<p>Overrides <a href="../phpArmory/phpArmory.html#methoditemNameFetch">phpArmory::itemNameFetch()</a> (itemNameFetch)</p>	
	<h4>Parameters:</h4>
	<ul>
			<li>
		<span class="type">string</span>
		<b>$item</b> 
		- 
		The name of the item</li>
			<li>
		<span class="type">string[]</span>
		<b>$filter</b> 
		- 
		Associative array of search parameters</li>
		</ul>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>
	<a name="methodxmlFetch"></a>
	<p></p>
	<h3>xmlFetch</h3>
	<div class="indent">
		<p>
		<code>void xmlFetch(
string
$url, [string
$userAgent = NULL], [integer
$timeout = NULL])</code>
		</p>
	
		<p class="linenumber">[line 236]</p>
		<p align="center"><strong>xmlFetch
</strong></p>
<p>This fetches the XML data as normal by calling  the parent function. If a cache id is set, it will  save the XML data to the cache and then unset the id.</p><h4>Tags:</h4>
<ul>
	<li><b>author</b> - Claire Matthews &lt;<a href="mailto:poeticdragon@stormblaze.net">poeticdragon@stormblaze.net</a>&gt;</li>
</ul>
		
<p>Overrides <a href="../phpArmory/phpArmory.html#methodxmlFetch">phpArmory::xmlFetch()</a> (xmlFetch)</p>	
	<h4>Parameters:</h4>
	<ul>
			<li>
		<span class="type">string</span>
		<b>$url</b> 
		- 
		URL of the page to fetch data from</li>
			<li>
		<span class="type">string</span>
		<b>$userAgent</b> 
		- 
		The user agent making the GET request</li>
			<li>
		<span class="type">integer</span>
		<b>$timeout</b> 
		- 
		The connection timeout in seconds</li>
		</ul>
	</div>
	<p class="top">[ <a href="#top">Top</a> ]</p>

	<hr>
	<a name="class_consts"></a>
	<h2>Class Constants</h2>
	</div>
	<div id="credit">
		<hr>
		Documentation generated on Sun, 02 Sep 2007 16:45:09 -0700 by <a href="http://www.phpdoc.org">phpDocumentor 1.4.0a2</a>
	</div>
</div>
</body>
</html>